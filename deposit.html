<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deposit - Quantum Apex</title>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background:#0f172a; font-family: 'Inter', sans-serif; }
.toast {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  background: #1e293b; padding: 20px 40px;
  border-radius: 12px; box-shadow: 0 0 25px rgba(16,185,129,0.4);
  display: none; z-index: 1000; text-align:center;
}
.copy {
  background:#020617;
  padding:8px;
  border-radius:8px;
  cursor:pointer;
  word-break: break-all;
}
</style>
</head>
<a href="https://wa.me/254750858351" target="_blank"
   class="fixed bottom-6 right-6 bg-emerald-500 hover:bg-emerald-600
          text-white px-5 py-3 rounded-full shadow-lg
          flex items-center gap-2 z-50">
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
    <path d="M12.04 2C6.58 2 2.16 6.42 2.16 11.88c0 2.1.55 4.15 1.6 5.96L2 22l4.31-1.72a9.83 9.83 0 0 0 5.73 1.83h.01c5.46 0 9.88-4.42 9.88-9.88S17.5 2 12.04 2zm5.73 14.27c-.24.68-1.4 1.31-1.94 1.39-.5.07-1.12.1-3.6-.77-3.17-1.11-5.2-4.52-5.35-4.73-.14-.2-1.29-1.72-1.29-3.28s.81-2.33 1.1-2.64c.29-.31.64-.39.86-.39h.62c.2 0 .47-.08.73.56.26.64.88 2.19.96 2.35.08.16.13.35.02.56-.1.2-.16.35-.32.54-.16.19-.34.43-.49.58-.16.16-.33.33-.14.64.2.31.89 1.46 1.91 2.36 1.32 1.18 2.43 1.55 2.78 1.72.35.16.56.14.77-.08.21-.21.88-1.02 1.11-1.37.23-.35.47-.29.79-.18.32.11 2.02.95 2.36 1.12.35.18.58.26.66.41.08.14.08.83-.16 1.51z"/>
  </svg>
  <span class="font-semibold">Contact Support</span>
</a>
<body class="text-white min-h-screen flex flex-col">

<nav class="flex justify-between items-center px-6 py-4 bg-slate-900 shadow-lg">
  <h1 class="text-2xl font-bold text-emerald-400">Deposit Funds</h1>
  <button onclick="window.location.href='dashboard.html'" class="bg-gray-600 px-4 py-2 rounded hover:bg-gray-700">Back</button>
</nav>

<section class="flex-1 p-6 space-y-6">

<div class="bg-slate-800 p-6 rounded-2xl space-y-4">
  <h2 class="text-xl font-semibold mb-2">Enter Deposit Amount</h2>
  <input id="depositAmount" type="number" placeholder="Amount" class="w-full p-3 rounded bg-slate-700">
  <button onclick="makeDeposit()" class="w-full bg-emerald-500 py-3 rounded hover:bg-emerald-600 font-semibold">Deposit Now</button>
  <p class="text-yellow-400 text-sm">⚠ Deposits are credited only after admin approval</p>
</div>

<div class="bg-slate-800 p-6 rounded-2xl space-y-3">
  <h3 class="font-semibold">Deposit Instructions</h3>

  <select id="countrySelect" class="w-full p-3 rounded bg-slate-700">
    <option value="">Select Country</option>
    <option>Kenya</option><option>Uganda</option><option>Tanzania</option>
    <option>Rwanda</option><option>Zambia</option><option>Botswana</option>
    <option>South Sudan</option><option>Mozambique</option>
    <option>United Kingdom</option><option>Nigeria</option><option>France</option>
    <option>Ethiopia</option><option>South Africa</option><option>Zimbabwe</option>
  </select>

  <div id="instructions" class="space-y-4 text-sm text-gray-300"></div>
</div>

<div class="bg-slate-800 p-6 rounded-2xl">
  <h3 class="font-semibold mb-2">Your Current Balance</h3>
  <p id="currentBalance" class="text-emerald-400 text-2xl">$0.00</p>
</div>

</section>

<div id="toast" class="toast"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const app = initializeApp({
  apiKey: "AIzaSyDaEphuY2kQue8m-20DDs68JDgQirAycBE",
  authDomain: "digital-wallet-40297.firebaseapp.com",
  databaseURL: "https://digital-wallet-40297-default-rtdb.firebaseio.com",
  projectId: "digital-wallet-40297"
});

const auth = getAuth(app);
const db = getDatabase(app);

const USDT = "0xe5e959e57ae1937acf0dde128a8b7ee0aa970168";

const mukuruDetails = `
Name: LANGAT ROBERT
National ID: 39822378
Country: Kenya
City: Nairobi
Address: Nairobi
Gender: Male
Phone: 00254707207201
Postal Code: 0090
Date of Birth: 02/02/2000

Tell Mukuru teller:
Send money to MOBILE WALLET (M-Pesa KES)
`;

function copyText(t){ navigator.clipboard.writeText(t); alert("Copied"); }

const mobileInstructions = {
  "Kenya": "Send via Safaricom M-Pesa to 0707207201 (Langat Robert)",
  "Uganda": "Dial *165# → Send outside Uganda → Kenya → M-Pesa → 254707207201 (Langat Robert)",
  "Tanzania": "Piga *115# → Tuma pesa → Nje ya nchi  → Kenya → Safaricom M-Pesa → 254707207201 ( Langat Robert)",
  "Rwanda": "Dial *182*7# → Send money → International Transfer → Kenya → M-Pesa → 254707207201 (Langat Robert)",
  "Zambia": "Dial *170# → International Transfer → Kenya → Safaricom M-Pesa → 254707207201 (Langat Robert)",
  "Botswana": "Dial *151# → International Transfer → Kenya → Safaricom M-Pesa → 254707207201 (Langat Robert)",
  "South Sudan": "Dial *165# → International transfer → Kenya → Safaricom M-Pesa → 254707207201 (Langat Robert)",
  "Ethiopia": "Dial *127# → International transfer → Kenya → Safaricom M-Pesa → 254707207201 (Langat Robert)"
};

document.getElementById("countrySelect").addEventListener("change", e=>{
  const c = e.target.value;
  if(!c){ instructions.innerHTML=""; return; }

  instructions.innerHTML = `
    <div>
      <h4 class="text-emerald-400 font-semibold">USDT (ERC20)</h4>
      <div class="copy" onclick="copyText('${USDT}')">${USDT}</div>
    </div>

    ${mobileInstructions[c] ? `
    <div>
      <h4 class="text-emerald-400 font-semibold">Mobile Money</h4>
      <div class="copy" onclick="copyText('${mobileInstructions[c]}')">${mobileInstructions[c]}</div>
    </div>` : ""}

    ${["South Africa","Zimbabwe","Botswana"].includes(c) ? `
    <div>
      <h4 class="text-emerald-400 font-semibold">Mukuru</h4>
      <pre class="copy" onclick="copyText(\`${mukuruDetails}\`)">${mukuruDetails}</pre>
    </div>` : ""}
  `;
});
</script>
</body>
</html>
