<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dashboard - Quantum Apex</title>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { background:#0f172a; font-family:Inter,sans-serif; }

.card { background:#1e293b; border-radius:14px; }

.market-row{
  display:grid;
  grid-template-columns:1.4fr 1fr auto;
  padding:12px;
  border-bottom:1px solid #334155;
  align-items:center;
}

.price-up{color:#22c55e}
.price-down{color:#ef4444}
.price-flat{color:#e5e7eb}

.section-title{
  font-size:14px;
  font-weight:600;
  color:#94a3b8;
  padding:10px 12px;
  background:#020617;
}

.menu, .profile-menu{
  display:none;
  position:absolute;
  background:#1e293b;
  border-radius:12px;
  padding:10px;
  z-index:100;
}

.menu button, .profile-menu button{
  width:100%;
  text-align:left;
  padding:8px;
  border-radius:8px;
}

.menu button:hover, .profile-menu button:hover{
  background:#334155;
}

.hamburger div{
  width:25px;height:3px;background:white;margin:4px 0;border-radius:2px;
}

.profile-icon{
  width:36px;height:36px;border-radius:50%;
  background:#10b981;
  display:flex;align-items:center;justify-content:center;
  font-weight:bold;cursor:pointer;
}
</style>
</head>

<body class="text-white min-h-screen">

<!-- NAVBAR -->
<nav class="flex justify-between items-center px-6 py-4 bg-slate-900 relative">

  <!-- LEFT -->
  <div class="flex items-center gap-4">
    <div id="hamburger" class="cursor-pointer">
      <div class="hamburger">
        <div></div><div></div><div></div>
      </div>
    </div>
    <span class="text-xl font-bold text-emerald-400">Quantum Apex</span>
  </div>

  <!-- RIGHT -->
  <div class="flex flex-col items-center">
    <div id="profileBtn" class="profile-icon">P</div>
    <span class="text-xs mt-1">Profile</span>
  </div>

  <!-- MENU -->
  <div id="menu" class="menu left-6 top-16 w-56">
    <button onclick="location.href='dashboard.html'">Dashboard</button>
    <button onclick="location.href='deposit.html'">Deposit</button>
    <button onclick="location.href='withdraw.html'">Withdraw</button>
    <button onclick="location.href='transaction.html'">Transaction History</button>
    <button onclick="location.href='investments.html'">Invest Now</button>
    <button onclick="location.href='investment.html'">My Investments</button>
    <button onclick="location.href='earn.html'">How to Earn Fast</button>
    <button onclick="location.href='referral.html'">Refer and Earn</button>
  </div>

  <!-- PROFILE -->
  <div id="profileMenu" class="profile-menu right-6 top-16 w-64">
    <p><strong>Name:</strong> <span id="pName"></span></p>
    <p><strong>Email:</strong> <span id="pEmail"></span></p>
    <p><strong>Phone:</strong> <span id="pPhone"></span></p>
    <p><strong>Country:</strong> <span id="pCountry"></span></p>
    <button id="logout" class="bg-red-600 mt-2">Logout</button>
  </div>

</nav>

<section class="p-4 space-y-6">

<!-- BALANCES -->
<div class="grid grid-cols-2 gap-4">
  <div class="card p-4 text-center">
    <p class="text-slate-400">Main Balance</p>
    <p id="mainBalance" class="text-2xl text-emerald-400">$0.00</p>
  </div>
  <div class="card p-4 text-center">
    <p class="text-slate-400">Locked Balance</p>
    <p id="lockedBalance" class="text-2xl text-yellow-400">$0.00</p>
  </div>
</div>

<!-- MARKET -->
<div class="card overflow-hidden">

<div class="section-title">Futures</div>

<div class="p-4 bg-slate-800 border-b border-slate-600">
  <p class="text-lg text-emerald-400 font-semibold">ðŸ¤– Quantum Apex Robot</p>
  <p class="text-sm mt-1">
      Price: <strong>$150</strong> Â· The Quantum Apex Robot is an AI-powered trading system designed to invest in Bitcoin, Forex, and Binary markets. Once activated, it executes automated trades on behalf of the user.

With our optimized AI algorithms, the robot can potentially generate RIO <strong class="text-emerald-400">Up to 200% in 7 days</strong>
    </p>
  <button onclick="location.href='investments.html'" class="mt-2 px-4 py-1 bg-blue-600 rounded">
    Activate Robot
  </button>
</div>

<div id="futures"></div>

<div class="section-title">Forex</div>
<div id="forex"></div>

</div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const app = initializeApp({
  apiKey:"AIzaSyDaEphuY2kQue8m-20DDs68JDgQirAycBE",
  authDomain:"digital-wallet-40297.firebaseapp.com",
  databaseURL:"https://digital-wallet-40297-default-rtdb.europe-west1.firebasedatabase.app",
  projectId:"digital-wallet-40297"
});

const auth = getAuth(app);
const db = getDatabase(app);

const hamburger = document.getElementById("hamburger");
const profileBtn = document.getElementById("profileBtn");
const menu = document.getElementById("menu");
const profileMenu = document.getElementById("profileMenu");

hamburger.onclick = (e) => { menu.style.display = menu.style.display==="block"?"none":"block"; e.stopPropagation(); };
profileBtn.onclick = (e) => { profileMenu.style.display = profileMenu.style.display==="block"?"none":"block"; e.stopPropagation(); };

// Close menus when clicking anywhere outside
document.addEventListener("click", () => {
  menu.style.display = "none";
  profileMenu.style.display = "none";
});

onAuthStateChanged(auth,user=>{
  if(!user) location.href="login.html";
  onValue(ref(db,"users/"+user.uid),snap=>{
    if(!snap.exists()) return;
    const d=snap.val();
    mainBalance.innerText=`$${(d.mainBalance||0).toFixed(2)}`;
    lockedBalance.innerText=`$${(d.lockedBalance||0).toFixed(2)}`;
    pName.innerText=d.name||"";
    pEmail.innerText=d.email||"";
    pPhone.innerText=d.phone||"";
    pCountry.innerText=d.country||"";
  });
});

document.getElementById("logout").onclick = () => signOut(auth).then(()=>location.href="login.html");

const futuresBase={GOLD:4985.71,SILVER:77.92};
const forexBase={
  EURUSD:1.1758,GBPUSD:1.3460,USDJPY:154.94,
  USDCHF:0.89,AUDUSD:0.63,USDCAD:1.34,
  NZDUSD:0.59,EURGBP:0.83,EURJPY:158.7,GBPJPY:191.5
};

const prev={};
const move=v=>v*(1+(Math.random()-0.5)/200);

function row(s,p,o){
  let c="price-flat",d=0,pc=0;
  if(o){d=p-o;pc=d/o*100;c=d>0?"price-up":"price-down";}
  return `<div class="market-row">
    <div><strong>${s}</strong><div class="text-xs text-slate-400">USD</div></div>
    <div class="text-right">${p.toFixed(4)}</div>
    <div class="${c} text-right">${d>=0?"+":""}${d.toFixed(3)}<br>${pc.toFixed(2)}%</div>
  </div>`;
}

function render(){
  futures.innerHTML="";
  forex.innerHTML="";
  Object.entries(futuresBase).forEach(([k,v])=>{
    const p=prev[k]?move(prev[k]):v;
    futures.innerHTML+=row(k,p,prev[k]);
    prev[k]=p;
  });
  Object.entries(forexBase).forEach(([k,v])=>{
    const p=prev[k]?move(prev[k]):v;
    forex.innerHTML+=row(k,p,prev[k]);
    prev[k]=p;
  });
}

render();
setInterval(render,5000);
</script>
</body>
</html>
